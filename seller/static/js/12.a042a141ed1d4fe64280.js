webpackJsonp([12],{CyQY:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.msg-title[data-v-be66a8da] {\n  margin: 20px 0;\n}\n",""])},ZBX1:function(t,e,a){"use strict";function n(t){a("rH9Y")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("6Trz"),o=a("zVef"),s=a("js5j"),l=a("cnC7"),d={data:function(){return{hint:{title:"操作提示",content:"编辑或发布本店的一些动态文章。"},tableData:[],totalPage:1,add_show:!1,crumb:{from:"店铺动态",now:"动态编辑"},info:{title:"",content:""},content:"",id:"",loading:!0}},created:function(){this.getDataList()},methods:{go_back:function(){this.add_show=!1},to_page:function(){this.getDataList()},getEditor:function(t){this.info.content=t},getDataList:function(){var t=this;this.axios.post(this.getApi("seller/auth/shop_news_list"),this.dafa({index:this.index})).then(function(e){t.loading=!1,0===e.data.code?(t.tableData=e.data.list,t.totalPage=e.data.fy_pgCount):t.$message(e.data.msg)}).catch(function(){t.loading=!1})},sendSave:function(){var t=this;this.info.title?this.info.content?this.axios.post(this.getApi("seller/auth/shop_news_save"),this.dafa({id:this.id,title:this.info.title,content:this.info.content})).then(function(e){t.$message(e.data.msg),0===e.data.code&&(t.add_show=!1,t.getDataList())}):this.$message("请输入动态内容"):this.$message("请输入动态标题")},editData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.id=e,this.add_show=!0,this.axios.post(this.getApi("seller/auth/shop_news_edit"),"id="+e).then(function(e){0===e.data.code?(t.info=e.data.info,t.content=e.data.info.content||""):t.$message(e.data.msg)})},delData:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post(e.getApi("seller/auth/shop_news_del"),"id="+t).then(function(t){e.$message(t.data.msg),0===t.data.code&&e.getDataList()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},computed:{index:function(){return this.$store.state.index}},components:{hint:i.a,EditorItem:l.a,PageItem:s.a,CrumbItem:o.a}},c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shop-trends prop-box"},[a("div",{staticClass:"m-type-list m-prop-box"},[a("hint",{attrs:{title:t.hint.title,content:t.hint.content}}),t._v(" "),a("h2",[t._v("店铺动态列表 "),a("em",[t._v(t._s(t.tableData.length)+"条")]),t._v(" "),a("el-button",{staticClass:"add-role-btn add-btn",attrs:{type:"text",icon:"plus",size:"small"},on:{click:function(e){t.editData("")}}},[t._v("添加动态\n      ")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{"element-loading-text":"拼命加载中",data:t.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.editData(e.row.id)}}},[t._v("编辑\n          ")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.delData(e.row.id)}}},[t._v("删除\n          ")])]}}])})],1),t._v(" "),a("page-item",{attrs:{totalPage:t.totalPage,currentPage:t.index},on:{toPage:t.to_page}})],1),t._v(" "),t.add_show?a("div",{staticClass:"add-trends prop"},[a("crumb-item",{attrs:{from:t.crumb.from,now:t.crumb.now},on:{goBack:t.go_back}}),t._v(" "),a("el-input",{staticClass:"msg-title",attrs:{placeholder:"请输入动态标题"},model:{value:t.info.title,callback:function(e){t.$set(t.info,"title",e)},expression:"info.title"}}),t._v(" "),a("editor-item",{attrs:{content:t.content},on:{getEditor:t.getEditor}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sendSave}},[t._v("确认保存")])],1):t._e()])},r=[],u={render:c,staticRenderFns:r},h=u,f=a("VU/8"),m=n,p=f(d,h,!1,m,"data-v-be66a8da",null);e.default=p.exports},rH9Y:function(t,e,a){var n=a("CyQY");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("546fb654",n,!0)}});