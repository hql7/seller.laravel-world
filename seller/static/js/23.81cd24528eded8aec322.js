webpackJsonp([23],{"0TtW":function(n,t,e){var a=e("JH5Q");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("7a9d4458",a,!0)},JH5Q:function(n,t,e){t=n.exports=e("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},LCng:function(n,t,e){"use strict";function a(n){e("0TtW")}Object.defineProperty(t,"__esModule",{value:!0});var l=e("6Trz"),s=e("js5j"),o={data:function(){return{hint:{title:"操作提示",content:"优惠促销管理, 由平台设置管理。导出数据可以选择下方筛选项精准导出"},tableData:[],disabled:"",status:"",type:"",search_type:"",search_str:"",multipleSelection:[],totalPage:1,id:"",del_id:[],loading:!0}},created:function(){this.get_voucher()},methods:{to_page:function(){this.get_voucher()},get_voucher:function(){var n=this;this.axios.post(this.getApi("seller/auth/voucher_list"),this.dafa({index:this.index,status:this.status,type:this.type,disabled:this.disabled,search_type:this.search_type,search_str:this.search_str})).then(function(t){n.loading=!1,0===t.data.code?(n.tableData=t.data.list,n.totalPage=t.data.fy_pgCount):n.$message(t.data.msg)}).catch(function(){n.loading=!1,n.$message("对不起！请稍后再试")})},handle:function(n,t){this.id=t,this.del_voucher(t,n)},toggleSelection:function(n){var t=this;n?n.forEach(function(n){t.$refs.multipleTable.toggleRowSelection(n)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(n){this.multipleSelection=n},del_voucher:function(n,t){var e=this;this.$confirm("是否确认操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"all"===n?e.multipleSelection.forEach(function(n){e.del_id.push(n.id)}):e.del_id.push(n),e.antiShake.antiShake(function(n,a){e.axios.post(e.getApi("seller/auth/voucher_act"),e.dafa({id_list:e.del_id,type:t})).then(function(t){n(t),e.del_id=[],0===t.data.code?e.get_voucher():e.toggleSelection()}).catch(function(n){a(n),console.log(n),e.toggleSelection(),e.del_id=[]})})}).catch(function(){e.toggleSelection(),e.del_id=[],e.$message({type:"info",message:"已取消删除"})})},exportVoucher:function(){var n=this;this.axios.post(this.getApi("seller/auth/voucher_export"),this.dafa({status:this.status,type:this.type,disabled:this.disabled,search_type:this.search_type,search_str:this.search_str})).then(function(t){0===t.data.code?location.href=t.data.msg:n.$message(t.data.msg)})}},computed:{index:function(){return this.$store.state.index}},components:{hint:l.a,page:s.a}},i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"goods-evaluate-list prop-box"},[e("div",{staticClass:"m-goods-evaluate-list m-prop-box"},[e("hint",{attrs:{title:n.hint.title,content:n.hint.content}}),n._v(" "),e("h2",[n._v("代金券列表\n      "),e("el-button",{staticClass:"add-member-btn add-btn",attrs:{type:"text",size:"small"},on:{click:function(t){n.exportVoucher()}}},[n._v("导出数据\n      ")]),n._v(" "),e("div",{staticClass:"u-right"},[e("el-select",{staticClass:"sele-s",attrs:{placeholder:"是否禁用",clearable:!0},model:{value:n.disabled,callback:function(t){n.disabled=t},expression:"disabled"}},[e("el-option",{attrs:{label:"正常",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"禁用",value:"1"}})],1),n._v(" "),e("el-select",{staticClass:"sele-s",attrs:{placeholder:"代金券状态",clearable:!0},model:{value:n.status,callback:function(t){n.status=t},expression:"status"}},[e("el-option",{attrs:{label:"未使用",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"已使用",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"已过期",value:"2"}}),n._v(" "),e("el-option",{attrs:{label:"未领取",value:"3"}})],1),n._v(" "),e("el-select",{staticClass:"sele-s",attrs:{placeholder:"代金券类型",clearable:!0},model:{value:n.type,callback:function(t){n.type=t},expression:"type"}},[e("el-option",{attrs:{label:"指定发放",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"免费领取",value:"2"}}),n._v(" "),e("el-option",{attrs:{label:"线下发放",value:"3"}})],1),n._v(" "),e("el-select",{staticClass:"sele-s",attrs:{placeholder:"搜索类型",clearable:!0},model:{value:n.search_type,callback:function(t){n.search_type=t},expression:"search_type"}},[e("el-option",{attrs:{label:"代金券名称",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"代金券账号",value:"1"}})],1),n._v(" "),e("el-input",{staticClass:"search",attrs:{placeholder:"搜索关键词"},model:{value:n.search_str,callback:function(t){n.search_str=t},expression:"search_str"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:n.get_voucher},slot:"append"})],1)],1)],1),n._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"multipleTable",attrs:{"element-loading-text":"拼命加载中",data:n.tableData,stripe:"",border:""},on:{"selection-change":n.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),n._v(" "),e("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-dropdown",{on:{command:function(e){n.handle(e,t.row.id)}}},[e("el-button",{attrs:{type:"primary",size:"small"}},[n._v("\n              处理"),e("i",{staticClass:"el-icon-setting el-icon--right"})]),n._v(" "),e("el-dropdown-menu",{staticClass:"i-box",attrs:{slot:"dropdown"},slot:"dropdown"},[0==t.row.disabled?e("el-dropdown-item",{attrs:{command:"0"}},[e("i",{staticClass:"iconfont icon-jinzhi c-danger"}),n._v(" 禁用\n              ")]):n._e(),n._v(" "),1==t.row.disabled?e("el-dropdown-item",{attrs:{command:"1"}},[e("i",{staticClass:"iconfont icon-huifu-copy c-danger"}),n._v(" 解禁\n              ")]):n._e(),n._v(" "),e("el-dropdown-item",{attrs:{command:"2"}},[e("i",{staticClass:"iconfont icon-shanchu3 c-danger"}),n._v(" 删除\n              ")])],1)],1)]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"name",label:"代金券名称","min-width":"140"}}),n._v(" "),e("el-table-column",{attrs:{prop:"type",label:"代金券类型","min-width":"140"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==t.row.type?e("span",[n._v("指定发放")]):2==t.row.type?e("span",[n._v("免费领取 ")]):3==t.row.type?e("span",[n._v("线下发放")]):n._e()]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"condition",label:"使用限制","min-width":"120"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==t.row.condition?e("span",[n._v("指定商品可用")]):2==t.row.condition?e("span",[n._v("指定分类可用 ")]):e("span",[n._v("全店通用")])]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"account",label:"账号","min-width":"120"}}),n._v(" "),e("el-table-column",{attrs:{prop:"password",label:"密码","min-width":"120"}}),n._v(" "),e("el-table-column",{attrs:{prop:"value",label:"面额","min-width":"80"}}),n._v(" "),e("el-table-column",{attrs:{prop:"point",label:"兑换所需积分","min-width":"140"}}),n._v(" "),e("el-table-column",{attrs:{prop:"money",label:"使用需满金额","min-width":"140"}}),n._v(" "),e("el-table-column",{attrs:{label:"代金券状态","min-width":"120"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==t.row.status?e("span",[n._v("已使用")]):2==t.row.status?e("span",[n._v("已过期 ")]):2==t.row.status?e("span",[n._v("已过期 ")]):e("span",[n._v("未使用")])]}}])}),n._v(" "),e("el-table-column",{attrs:{label:"是否禁用","min-width":"120"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==t.row.disabled?e("span",[n._v("禁用")]):e("span",[n._v("正常")])]}}])}),n._v(" "),e("el-table-column",{attrs:{prop:"begin_end_time",label:"有效使用区间","min-width":"280"}})],1),n._v(" "),n.tableData.length>0?e("div",{staticClass:"select-all"},[e("el-button",{attrs:{plain:!0,type:"primary"},on:{click:function(t){n.toggleSelection()}}},[n._v("取消")]),n._v(" "),e("el-button",{attrs:{plain:!0,disabled:0==n.multipleSelection.length,type:"danger"},on:{click:function(t){n.del_voucher("all",2)}}},[n._v("删除\n      ")]),n._v(" "),e("el-button",{attrs:{plain:!0,type:"danger"},on:{click:function(t){n.del_voucher("",3)}}},[n._v("一键删除过期券\n      ")])],1):n._e(),n._v(" "),e("page",{attrs:{totalPage:n.totalPage,currentPage:n.index},on:{toPage:n.to_page}})],1)])},c=[],r={render:i,staticRenderFns:c},d=r,u=e("VU/8"),p=a,h=u(o,d,!1,p,"data-v-77de1f78",null);t.default=h.exports}});