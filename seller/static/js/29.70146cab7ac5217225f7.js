webpackJsonp([29],{Scrp:function(e,t,i){var n=i("sEbh");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("82b86544",n,!0)},jJhT:function(e,t,i){"use strict";function n(e){i("Scrp")}Object.defineProperty(t,"__esModule",{value:!0});var s=i("mvHQ"),c=i.n(s),r=i("6Trz"),o=i("zVef"),a={data:function(){return{hint:{title:"操作提示",content:"上传商品时，若选择不包邮则按运费模版计算运费，运费模版可设置店铺满额包邮，指定地区邮费，首重运费续重运费。"},tableData:[],add_show:!1,crumb:{from:"运费模版列表",now:"编辑运费模版"},ruleForm:{id:"",name:"",first_weight:1e3,first_price:null,second_weight:1e3,second_price:null,zoning:[]},rules:{name:[{required:!0,message:"不可为空",trigger:"blur"}],first_weight:[{required:!0,type:"number",message:"不可为空",trigger:"blur"}],ship_money:[{required:!0,type:"number",message:"不可为空",trigger:"blur"}],second_weight:[{required:!0,type:"number",message:"不可为空",trigger:"blur"}],second_price:[{required:!0,type:"number",message:"不可为空",trigger:"blur"}],first_price:[{required:!0,type:"number",message:"不可为空",trigger:"blur"}]},id:"",dialogVisible:!1,city:[],city_index:"",chick:{}}},created:function(){this.get_system()},methods:{go_back:function(){this.add_show=!1},get_system:function(){var e=this;this.axios.post(this.getApi("seller/auth/fare_list")).then(function(t){0===t.data.code?e.tableData=t.data.list:e.$message(t.data.msg)}).catch(function(){e.$message("对不起！请稍后再试")})},edit_system:function(e){var t=this;this.id=e,this.antiShake.antiShake(function(i,n){t.axios.post(t.getApi("seller/auth/fare_edit"),"id="+e).then(function(e){i(e),0===e.data.code&&(t.add_show=!0,e.data.info?t.ruleForm=e.data.info:t.ruleForm={id:"",name:"",is_free_ship:0,ship_money:0,first_weight:1e3,first_price:null,second_weight:1e3,second_price:null,zoning:[]})}).catch(function(e){n(e)})})},add_city_yf:function(){this.ruleForm.zoning.push({f_weight:"1000",s_weight:"1000"})},del_city_yf:function(e){this.ruleForm.zoning.splice(e,1)},edit_city_yf:function(e,t){var i=this;this.city_index=t;var n=JSON.parse(c()(this.ruleForm.zoning)),s=n.splice(t,1),r=s[0].area||"",o="";n.forEach(function(e){o+=e.area}),this.antiShake.antiShake(function(e,t){i.axios.post(i.getApi("seller/auth/fare_show_area"),i.dafa({selected_city:r,disabled_city:o})).then(function(t){e(t),0===t.data.code&&(i.dialogVisible=!0,i.city=t.data.list)}).catch(function(e){t(e),i.$message("对不起!请稍后再试")})})},set_system:function(e){var t=this;this.antiShake.antiShake(function(i,n){t.axios.post(t.getApi("seller/auth/fare_use"),"id="+e).then(function(e){i(e),0===e.data.code&&t.get_system()}).catch(function(e){n(e)})})},province_chick:function(e,t){e.target.checked?this.city[t].childs.forEach(function(e){e.c_disabled||(e.c_selected=!0)}):this.city[t].childs.forEach(function(e){e.c_disabled||(e.c_selected=!1)})},city_chick:function(e){var t=0;this.city[e].childs.forEach(function(e){e.c_selected||t++}),this.city[e].selected=0==t},to_sure:function(){this.ruleForm.zoning[this.city_index].names="",this.ruleForm.zoning[this.city_index].area="";for(var e in this.city){this.city[e].selected&&(this.ruleForm.zoning[this.city_index].names+=this.city[e].name+",",this.ruleForm.zoning[this.city_index].area+=this.city[e].id+",");for(var t in this.city[e].childs)this.city[e].childs[t].c_selected&&(this.ruleForm.zoning[this.city_index].area+=this.city[e].childs[t].c_id+",",this.city[e].selected||(this.ruleForm.zoning[this.city_index].names+=this.city[e].childs[t].c_name+","))}this.dialogVisible=!1},del_system:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.antiShake.antiShake(function(i,n){t.axios.post(t.getApi("seller/auth/fare_del"),"id="+e).then(function(e){i(e),0===e.data.code&&t.get_system()}).catch(function(e){n(e),console.log(e)})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message("请检查填写信息是否有误"),!1;t.antiShake.antiShake(function(e,i){t.axios.post(t.getApi("seller/auth/fare_save"),t.dafa({id:t.ruleForm.id,name:t.ruleForm.name,is_free_ship:t.ruleForm.is_free_ship,ship_money:t.ruleForm.ship_money,first_weight:t.ruleForm.first_weight,first_price:t.ruleForm.first_price,second_weight:t.ruleForm.second_weight,second_price:t.ruleForm.second_price,zoning:t.ruleForm.zoning})).then(function(i){e(i),0===i.data.code&&(t.add_show=!1,t.get_system())}).catch(function(e){i(e),console.log(e)})})})}},components:{hint:r.a,crumb:o.a}},l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"type-list prop-box"},[i("div",{staticClass:"m-type-list m-prop-box"},[i("hint",{attrs:{title:e.hint.title,content:e.hint.content}}),e._v(" "),i("h2",[e._v("运费模版列表\n      "),i("el-button",{staticClass:"add-role-btn add-btn",attrs:{type:"text",icon:"plus",size:"small"},on:{click:function(t){e.edit_system("","")}}},[e._v("新增运费模版\n      ")])],1),e._v(" "),e._l(e.tableData,function(t){return i("div",{staticClass:"yf"},[i("h3",[i("strong",[e._v(e._s(t.name))]),e._v(" "),1==t.is_default?i("i",{staticClass:"iconfont icon-shiyongzhong"}):e._e(),i("span",{staticClass:"u-right"},[0==t.is_default?i("el-button",{attrs:{type:"warning",size:"small",icon:"setting"},on:{click:function(i){e.set_system(t.id)}}},[e._v("设为默认\n          ")]):e._e(),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(i){e.edit_system(t.id)}}},[e._v("编辑\n          ")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(i){e.del_system(t.id)}}},[e._v("删除\n          ")])],1)]),e._v(" "),e._m(0,!0,!1),e._v(" "),i("p",[i("b",[e._v("全国")]),i("strong",{staticClass:"u-right"},[i("em",[e._v(e._s(t.first_weight))]),i("em",[e._v(e._s(t.first_price))]),i("em",[e._v(e._s(t.second_weight))]),i("em",[e._v(e._s(t.second_price))])])]),e._v(" "),e._l(t.zoning,function(t){return i("p",[i("b",[e._v(e._s(t.names))]),e._v(" "),i("strong",{staticClass:"u-right"},[i("em",[e._v(e._s(t.f_weight))]),i("em",[e._v(e._s(t.f_price))]),i("em",[e._v(e._s(t.s_weight))]),i("em",[e._v(e._s(t.s_price))])])])})],2)})],2),e._v(" "),e.add_show?i("div",{staticClass:"add-type prop"},[i("crumb",{attrs:{from:e.crumb.from,now:e.crumb.now},on:{goBack:e.go_back}}),e._v(" "),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"240px"}},[i("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[i("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否开启店铺满额包邮"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-text":"是","inactive-text":"否","active-value":1,"inactive-value":0},model:{value:e.ruleForm.is_free_ship,callback:function(t){e.$set(e.ruleForm,"is_free_ship",t)},expression:"ruleForm.is_free_ship"}})],1),e._v(" "),1==e.ruleForm.is_free_ship?i("el-form-item",{attrs:{prop:"ship_money",label:"店铺包邮需满金额（元）"}},[i("el-input",{model:{value:e.ruleForm.ship_money,callback:function(t){e.$set(e.ruleForm,"ship_money",e._n(t))},expression:"ruleForm.ship_money"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"默认运费"}},[i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"first_weight"}},[i("el-tooltip",{attrs:{content:"填写首重",placement:"top"}},[i("el-input",{attrs:{placeholder:"填写首重（g）"},model:{value:e.ruleForm.first_weight,callback:function(t){e.$set(e.ruleForm,"first_weight",e._n(t))},expression:"ruleForm.first_weight"}})],1)],1)],1),e._v(" "),i("el-col",{staticClass:"line",attrs:{span:1}},[e._v("-")]),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"first_price"}},[i("el-tooltip",{attrs:{content:"填写首重运费",placement:"top"}},[i("el-input",{attrs:{placeholder:"填写首重运费（元）"},model:{value:e.ruleForm.first_price,callback:function(t){e.$set(e.ruleForm,"first_price",e._n(t))},expression:"ruleForm.first_price"}})],1)],1)],1),e._v(" "),i("el-col",{staticClass:"line",attrs:{span:1}},[e._v("-")]),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"second_weight"}},[i("el-tooltip",{attrs:{content:"填写续重",placement:"top"}},[i("el-input",{attrs:{placeholder:"填写续重（g）"},model:{value:e.ruleForm.second_weight,callback:function(t){e.$set(e.ruleForm,"second_weight",e._n(t))},expression:"ruleForm.second_weight"}})],1)],1)],1),e._v(" "),i("el-col",{staticClass:"line",attrs:{span:1}},[e._v("-")]),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{prop:"second_price"}},[i("el-tooltip",{attrs:{content:"填写续重运费",placement:"top"}},[i("el-input",{attrs:{placeholder:"填写续重运费（元）"},model:{value:e.ruleForm.second_price,callback:function(t){e.$set(e.ruleForm,"second_price",e._n(t))},expression:"ruleForm.second_price"}})],1)],1)],1)],1),e._v(" "),i("el-button",{on:{click:e.add_city_yf}},[e._v("设定指定城市运费")]),e._v(" "),i("div",{staticClass:"choice-SS"},[i("h4",[i("strong",[e._v("运送到")]),i("strong",{staticClass:"u-right"},[i("em",[e._v("首重(g)")]),i("em",[e._v("运费(元)")]),i("em",[e._v("续重(g)")]),i("em",[e._v("运费(元)")])])]),e._v(" "),e._l(e.ruleForm.zoning,function(t,n){return i("p",[i("b",[e._v(e._s(t.names))]),i("strong",{staticClass:"u-right"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(i){e.edit_city_yf(t.id,n)}}}),e._v(" "),i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.del_city_yf(n)}}}),e._v(" "),i("em",[i("el-input",{model:{value:t.f_weight,callback:function(i){e.$set(t,"f_weight",i)},expression:"item.f_weight"}})],1),i("em",[i("el-input",{model:{value:t.f_price,callback:function(i){e.$set(t,"f_price",i)},expression:"item.f_price"}})],1),i("em",[i("el-input",{model:{value:t.s_weight,callback:function(i){e.$set(t,"s_weight",i)},expression:"item.s_weight"}})],1),i("em",[i("el-input",{model:{value:t.s_price,callback:function(i){e.$set(t,"s_price",i)},expression:"item.s_price"}})],1)],1)])})],2),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保 存")])],1)],1)],1):e._e(),e._v(" "),i("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"box"},e._l(e.city,function(t,n){return i("div",{key:t.id,staticClass:"city_box"},[i("div",{staticClass:"city_left"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"item.selected"}],attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:Array.isArray(t.selected)?e._i(t.selected,null)>-1:t.selected},on:{change:[function(i){var n=t.selected,s=i.target,c=!!s.checked;if(Array.isArray(n)){var r=e._i(n,null);s.checked?r<0&&(t.selected=n.concat([null])):r>-1&&(t.selected=n.slice(0,r).concat(n.slice(r+1)))}else e.$set(t,"selected",c)},function(t){e.province_chick(t,n)}]}}),i("label",[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticClass:"city_right"},e._l(t.childs,function(t){return i("span",{key:t.c_id},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.c_selected,expression:"ite.c_selected"}],attrs:{type:"checkbox",disabled:t.c_disabled},domProps:{checked:Array.isArray(t.c_selected)?e._i(t.c_selected,null)>-1:t.c_selected},on:{change:[function(i){var n=t.c_selected,s=i.target,c=!!s.checked;if(Array.isArray(n)){var r=e._i(n,null);s.checked?r<0&&(t.c_selected=n.concat([null])):r>-1&&(t.c_selected=n.slice(0,r).concat(n.slice(r+1)))}else e.$set(t,"c_selected",c)},function(t){e.city_chick(n)}]}}),i("label",[e._v(e._s(t.c_name))])])}))])})),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.to_sure}},[e._v("确 定")])],1)])],1)},d=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h4",[i("b",[e._v("运送到")]),i("strong",{staticClass:"u-right"},[i("em",[e._v("首重(g)")]),i("em",[e._v("运费(元)")]),i("em",[e._v("续重(g)")]),i("em",[e._v("运费(元)")])])])}],_={render:l,staticRenderFns:d},u=_,p=i("VU/8"),h=n,m=p(a,u,!1,h,"data-v-8d8c2b46",null);t.default=m.exports},sEbh:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,"\n.yf[data-v-8d8c2b46], .choice-SS[data-v-8d8c2b46] {\n  border: 1px solid #dfe6ec;\n  margin-bottom: 35px;\n}\n.yf h3[data-v-8d8c2b46] {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 20px;\n  background: #FAFAFA;\n  position: relative;\n}\n.yf h3 strong[data-v-8d8c2b46] {\n  color: #ff4d51;\n  font-size: 14px;\n}\n.yf h3 i[data-v-8d8c2b46] {\n  color: #ff4d51;\n  font-size: 66px;\n  position: absolute;\n  top: 20px;\n  left: 30%;\n}\nh4[data-v-8d8c2b46] {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 20px;\n  background: #eef1f6;\n}\n.yf p[data-v-8d8c2b46] {\n  line-height: 20px;\n  padding: 10px 20px;\n  border-bottom: 1px solid #f7f7f7;\n}\nb[data-v-8d8c2b46] {\n  display: inline-block;\n  width: 40%;\n}\nem[data-v-8d8c2b46] {\n  display: inline-block;\n  width: 100px;\n  text-align: center;\n  margin: 0 15px;\n}\n.line[data-v-8d8c2b46] {\n  text-align: center;\n}\n.choice-SS[data-v-8d8c2b46] {\n  margin-top: 10px;\n}\n.choice-SS p[data-v-8d8c2b46] {\n  line-height: 20px;\n  padding: 0 20px;\n  border-bottom: 1px solid #f7f7f7;\n  overflow: hidden;\n}\n.choice-SS b[data-v-8d8c2b46] {\n  padding: 10px 0;\n}\n.choice-SS em[data-v-8d8c2b46] {\n  height: 40px;\n}\n.choice-SS .el-button[data-v-8d8c2b46] {\n  width: 30px;\n  margin: 0;\n}\n.box[data-v-8d8c2b46] {\n  border: 1px solid #f3f3f3;\n}\n.city_box[data-v-8d8c2b46] {\n  overflow: hidden;\n  border-bottom: 1px solid #f3f3f3;\n}\n.city_left[data-v-8d8c2b46] {\n  width: 100px;\n  line-height: 40px;\n  padding-left: 20px;\n  float: left;\n  border-right: 1px solid #f3f3f3;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.box input[data-v-8d8c2b46] {\n  margin-right: 5px;\n  vertical-align: -1px;\n}\n.city_right[data-v-8d8c2b46] {\n  margin-left: 110px;\n  padding: 10px 20px;\n}\n.city_right span[data-v-8d8c2b46] {\n  line-height: 20px;\n  margin: 0 15px 15px 0;\n}\n",""])}});