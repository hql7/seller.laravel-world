webpackJsonp([14],{"/xVP":function(t,e,a){"use strict";function i(t){a("yV7m")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("6Trz"),s=a("js5j"),o=a("cnC7"),l={data:function(){return{hint:{title:"操作提示",content:"关注本店铺的会员列表，可以给会员推送消息。"},name:"",tableData:[],totalPage:1,dialogVisible:!1,msg:{title:"",content:""},content:"",loading:!0}},created:function(){this.getDataList()},methods:{to_page:function(){this.getDataList()},getEditor:function(t){this.content=t},getDataList:function(){var t=this;this.axios.post(this.getApi("seller/auth/shop_attention_list"),this.dafa({index:this.index,name:this.name})).then(function(e){t.loading=!1,0===e.data.code?(t.tableData=e.data.list,t.totalPage=e.data.fy_pgCount):t.$message(e.data.msg)}).catch(function(){t.loading=!1,t.$message("对不起！请稍后再试")})},openPopup:function(){this.dialogVisible=!0},sendMsgOk:function(){var t=this;this.msg.title?this.content?this.axios.post(this.getApi("seller/auth/shop_send_message"),this.dafa({title:this.msg.title,content:this.content})).then(function(e){t.$message(e.data.msg),0===e.data.code&&(t.dialogVisible=!1)}):this.$message("请输入消息内容"):this.$message("请输入消息标题")}},watch:{dialogVisible:function(t){t||(this.msg.title="",this.content="")}},computed:{index:function(){return this.$store.state.index}},components:{hint:n.a,EditorItem:o.a,PageItem:s.a}},c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"type-list prop-box"},[a("div",{staticClass:"m-type-list m-prop-box"},[a("hint",{attrs:{title:t.hint.title,content:t.hint.content}}),t._v(" "),a("h2",[t._v("店铺会员关注列表 "),a("em",{staticClass:"c-danger"},[t._v(t._s(t.tableData.length)+"位")]),t._v(" "),a("el-button",{staticClass:"add-role-btn add-btn",attrs:{type:"text",icon:"plus",size:"small"},on:{click:t.openPopup}},[t._v("发消息\n      ")]),t._v(" "),a("div",{staticClass:"u-right"},[a("el-input",{staticClass:"search",attrs:{placeholder:"搜索会员名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.getDataList()}},slot:"append"})],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{"element-loading-text":"拼命加载中",data:t.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"会员名称","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"关注时间","min-width":"200"}})],1),t._v(" "),a("page-item",{attrs:{totalPage:t.totalPage,currentPage:t.index},on:{toPage:t.to_page}})],1),t._v(" "),a("el-dialog",{attrs:{title:"推送消息",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{staticClass:"msg-title",attrs:{placeholder:"请输入消息标题"},model:{value:t.msg.title,callback:function(e){t.$set(t.msg,"title",e)},expression:"msg.title"}}),t._v(" "),a("editor-item",{attrs:{content:t.content},on:{getEditor:t.getEditor}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sendMsgOk}},[t._v("发 送")])],1)],1)],1)},r=[],d={render:c,staticRenderFns:r},g=d,p=a("VU/8"),u=i,m=p(l,g,!1,u,"data-v-a9276300",null);e.default=m.exports},fqy0:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.msg-title[data-v-a9276300] {\n  margin-bottom: 20px;\n}\n",""])},yV7m:function(t,e,a){var i=a("fqy0");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("7cb9a14f",i,!0)}});