webpackJsonp([40],{n9qO:function(n,t,e){t=n.exports=e("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*管理员*/\n.m-oplog > h2[data-v-32027b04] {\n  font-size: 16px;\n  line-height: 36px;\n  margin-bottom: 10px;\n}\n.log_search .el-input[data-v-32027b04] {\n  /*float: left;*/\n  width: 290px;\n}\n/*添加管理员*/\n",""])},r3jv:function(n,t,e){var l=e("n9qO");"string"==typeof l&&(l=[[n.i,l,""]]),l.locals&&(n.exports=l.locals);e("rjj0")("ceb912b2",l,!0)},"yFc/":function(n,t,e){"use strict";function l(n){e("r3jv")}Object.defineProperty(t,"__esModule",{value:!0});var a=e("6Trz"),o=e("js5j"),i={data:function(){return{hint:{title:"操作提示",content:"网站系统操作日志, 由总平台设置管理.点击列表里的删除按钮删除单个日志时不受复选框的影响！复选框数据只在点击列表下方批量删除时有效"},tableData:[],multipleSelection:[],add_show:!1,del_id:[],search_type:"",search_str:"",totalPage:1,_super:0,loading:!0}},mounted:function(){this.get_roles()},methods:{go_back:function(){this.add_show=!1},to_page:function(){this.get_roles()},get_roles:function(n){var t=this;this.axios.post(this.getApi("seller/auth/log_list"),this.dafa({search_type:this.search_type,search_str:this.search_str,index:this.index})).then(function(n){t.loading=!1,0===n.data.code?(t.tableData=n.data.list,t.totalPage=n.data.fy_pgCount,t._super=n.data.super):t.$message(n.data.msg)}).catch(function(){t.loading=!1,t.$message("对不起！请稍后再试")})},toggleSelection:function(n){var t=this;n?n.forEach(function(n){t.$refs.multipleTable.toggleRowSelection(n)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(n){this.multipleSelection=n},del_role:function(n){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"all"===n?t.multipleSelection.forEach(function(n){t.del_id.push(n.id)}):t.del_id.push(n),t.axios.post(t.getApi("seller/auth/log_del"),t.dafa({id_list:t.del_id})).then(function(n){t.$message(n.data.msg),t.del_id=[],0===n.data.code?t.get_roles():t.toggleSelection()}).catch(function(n){t.$message("对不起！请稍后再试"),t.toggleSelection(),t.del_id=[]})}).catch(function(){t.toggleSelection(),t.del_id=[],t.$message({type:"info",message:"已取消删除"})})}},computed:{index:function(){return this.$store.state.index}},components:{hint:a.a,page:o.a}},s=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"oplog prop-box"},[e("div",{staticClass:"m-oplog"},[e("hint",{attrs:{title:n.hint.title,content:n.hint.content}}),n._v(" "),e("h2",[n._v("操作日志列表"),e("span",[n._v("("+n._s(n.tableData.length)+")条")]),n._v(" "),e("div",{staticClass:"u-right log_search"},[e("el-select",{staticClass:"sele-s",attrs:{placeholder:"搜索类型",clearable:!0},model:{value:n.search_type,callback:function(t){n.search_type=t},expression:"search_type"}},[e("el-option",{attrs:{label:"管理员名称",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"操作动作",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"IP地址",value:"2"}})],1),n._v(" "),e("el-input",{staticClass:"search",attrs:{placeholder:"搜索关键词"},model:{value:n.search_str,callback:function(t){n.search_str=t},expression:"search_str"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){n.get_roles(!0)}},slot:"append"})],1)],1)]),n._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"multipleTable",attrs:{"element-loading-text":"拼命加载中",data:n.tableData,stripe:"",border:""},on:{"selection-change":n.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),n._v(" "),e("el-table-column",{attrs:{prop:"manager",label:"管理员名称","min-width":"120"}}),n._v(" "),e("el-table-column",{attrs:{prop:"action",label:"操作动作","min-width":"130"}}),n._v(" "),e("el-table-column",{attrs:{prop:"content",label:"日志的详细描述","min-width":"180"}}),n._v(" "),e("el-table-column",{attrs:{prop:"ip",label:"操作IP地址","min-width":"180"}}),n._v(" "),e("el-table-column",{attrs:{prop:"url",label:"访问页面地址","min-width":"180"}}),n._v(" "),e("el-table-column",{attrs:{prop:"time",label:"操作时间","min-width":"180"}}),n._v(" "),e("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==n._super?e("el-button",{attrs:{type:"danger",size:"small",icon:"delete"},on:{click:function(e){n.del_role(t.row.id)}}},[n._v("删除\n          ")]):n._e()]}}])})],1),n._v(" "),n.tableData.length>0?e("div",{staticClass:"select-all"},[e("el-button",{attrs:{plain:!0,type:"primary"},on:{click:function(t){n.toggleSelection()}}},[n._v("取消")]),n._v(" "),1==n._super?e("el-button",{attrs:{plain:!0,type:"danger"},on:{click:function(t){n.del_role("all")}}},[n._v("删除")]):n._e()],1):n._e(),n._v(" "),e("page",{attrs:{totalPage:n.totalPage,currentPage:n.index},on:{toPage:n.to_page}})],1)])},c=[],r={render:s,staticRenderFns:c},d=r,p=e("VU/8"),u=l,h=p(i,d,!1,u,"data-v-32027b04",null);t.default=h.exports}});