webpackJsonp([36],{"/WeY":function(e,t,a){var l=a("lxOe");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("rjj0")("539fa2cb",l,!0)},"3yLC":function(e,t,a){"use strict";function l(e){a("/WeY")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("6Trz"),s=a("zVef"),n={data:function(){return{hint:{title:"操作提示",content:"商品的属性为商品说明参数，仅供展示。商品的规格为商品购买时必须选择的参数，商品规格是购买商品时用户可以选择的, 如衣服颜色, 尺寸等。需要选定一个三级分类才会出现相关规格。"},cly:{id1:"",list1:[],id2:"",list2:[],id3:"",list3:[]},tableData:[],add_show:!1,crumb:{from:"商品规格",now:"编辑规格"},ruleForm:{name:"",note:"",sort:"",value:[]},rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],note:[{required:!0,message:"请输入规格备注",trigger:"blur"}],sort:[{required:!0,message:"不能为空"},{type:"number",message:"必须为数字值"}]},id:"",loading:!1}},created:function(){this.getFL(0,0)},methods:{go_back:function(){this.add_show=!1},getFL:function(e,t){var a=this;this.loading=!0,this.axios.post(this.getApi("coms/get_cate"),"id="+e).then(function(e){if(0===e.data.code)switch(t){case 0:a.cly.list1=e.data.list;break;case 1:a.cly.list2=e.data.list,a.cly.list3=[],a.cly.id2="",a.cly.id3="";break;case 2:a.cly.list3=e.data.list,a.cly.id3=""}else a.$message(e.data.msg)})},get_spec:function(e){var t=this;this.axios.post(this.getApi("seller/auth/specs_list"),"cate_id="+e).then(function(e){t.loading=!1,0===e.data.code?t.tableData=e.data.specs:t.$message(e.data.msg)}).catch(function(){t.loading=!1})},edit_spec:function(e){this.add_show=!0,this.id=e.id,this.ruleForm.value=e.value},add_spec_value:function(){this.ruleForm.value.push({name:"",img:"",sort:"",key:Date.now()})},del_spec_value:function(e,t){var a=this,l=[];e?this.antiShake.antiShake(function(t,i){a.axios.post(a.getApi("seller/auth/specs_value_del"),"id="+e).then(function(i){t(i),0===i.data.code&&(a.ruleForm.value.forEach(function(t){t.id!=e&&l.push(t)}),a.ruleForm.value=l)}).catch(function(e){i(e)})}):(this.ruleForm.value.forEach(function(e){e.key!=t&&l.push(e)}),this.ruleForm.value=l)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message("请检查填写信息是否有误"),!1;t.tableData.forEach(function(e){e.id==t.id&&(e.value=t.ruleForm.value)}),t.antiShake.antiShake(function(e,a){t.axios.post(t.getApi("seller/auth/specs_value_save"),t.dafa({specs:t.tableData})).then(function(a){e(a),0===a.data.code&&(t.add_show=!1)}).catch(function(e){a(e)})})})}},computed:{index:function(){return this.$store.state.index}},components:{hint:i.a,crumb:s.a}},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"spec-list prop-box"},[a("div",{staticClass:"m-spec-list m-prop-box"},[a("hint",{attrs:{title:e.hint.title,content:e.hint.content}}),e._v(" "),a("h2",[e._v("商品规格\n      "),a("div",{staticClass:"u-right"},[a("el-select",{attrs:{clearable:"",placeholder:"一级分类"},on:{change:function(t){e.getFL(t,1)}},model:{value:e.cly.id1,callback:function(t){e.$set(e.cly,"id1",t)},expression:"cly.id1"}},[a("el-option",{attrs:{label:"请选择",value:"",disabled:""}}),e._v(" "),e._l(e.cly.list1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"二级分类"},on:{change:function(t){e.getFL(t,2)}},model:{value:e.cly.id2,callback:function(t){e.$set(e.cly,"id2",t)},expression:"cly.id2"}},[a("el-option",{attrs:{label:"请选择",value:"",disabled:""}}),e._v(" "),e._l(e.cly.list2,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"三级分类"},on:{change:e.get_spec},model:{value:e.cly.id3,callback:function(t){e.$set(e.cly,"id3",t)},expression:"cly.id3"}},[a("el-option",{attrs:{label:"请选择",value:"",disabled:""}}),e._v(" "),e._l(e.cly.list3,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1)]),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{"element-loading-text":"拼命加载中",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"规格名称","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){e.edit_spec(t.row)}}},[e._v("编辑\n          ")])]}}])})],1)],1),e._v(" "),e.add_show?a("div",{staticClass:"add-spec prop"},[a("crumb",{attrs:{from:e.crumb.from,now:e.crumb.now},on:{goBack:e.go_back}}),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"240px"}},[a("el-form-item",{attrs:{label:"规格值"}},[a("table",[a("tr",[a("th",[e._v("规格值")]),e._v(" "),a("th",[e._v("排序")]),e._v(" "),a("th",[e._v("操作")])]),e._v(" "),e._l(e.ruleForm.value,function(t){return a("tr",[a("td",{staticClass:"sele-s"},[a("el-input",{attrs:{placeholder:"请输入规格值名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("td",{staticClass:"sele-s"},[a("el-input",{attrs:{placeholder:"请输入排序数值"},model:{value:t.sort,callback:function(a){e.$set(t,"sort",a)},expression:"item.sort"}})],1),e._v(" "),a("td",{staticClass:"sele-s"},[a("el-button",{attrs:{type:"danger",size:"small",icon:"delete"},on:{click:function(a){e.del_spec_value(t.id,t.key)}}},[e._v("删除\n              ")])],1)])})],2),e._v(" "),a("el-button",{on:{click:e.add_spec_value}},[e._v("新增属性")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确认提交")])],1)],1)],1):e._e()])},c=[],r={render:o,staticRenderFns:c},u=r,d=a("VU/8"),m=l,p=d(n,u,!1,m,"data-v-084c6f51",null);t.default=p.exports},lxOe:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"\n.sele-s .el-button[data-v-084c6f51] {\n  width: 120px;\n  height: 36px;\n  margin: 0;\n}\n",""])}});